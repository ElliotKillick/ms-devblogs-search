Alois Kraus  November 30, 2022


  1  Collapse this comment
Copy link
Reading is not the complete story. If you want to read a large file into a big dynamically allocated buffer of a file which is on a fast SSD or already in the memory cache you will be mostly bitten by soft page faults. If you use many threads the OS lock around the working set becomes a major headache. Based on experiments I found years a ago the sweet spot of ca. 4 concurrent...Read moreReading is not the complete story. If you want to read a large file into a big dynamically allocated buffer of a file which is on a fast SSD or already in the memory cache you will be mostly bitten by soft page faults. If you use many threads the OS lock around the working set becomes a major headache. Based on experiments I found years a ago the sweet spot of ca. 4 concurrent thread which asynchronously read and let the OS soft page fault the data by copying into the user supplied buffer. The Windows Soft page fault performance is a story with many twists: https://aloiskraus.wordpress.com/2017/11/12/bringing-the-hardware-and-windows-to-its-limits/ and it is not over yet.
Read less