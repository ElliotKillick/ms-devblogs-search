David Streeter  November 1, 2023
· Edited

  1  Collapse this comment
Copy link
Needs more cowbell!





Brian Boorman  November 1, 2023


  0  Collapse this comment
Copy link
Great…. now I have Blue Oyster Cult stuck in my head.





Lance McCarthy  November 1, 2023


  0  Collapse this comment
Copy link
Gotta love seeing a bit flip ending up in a blog post about something else.





Leif Strand  October 31, 2023


  0  Collapse this comment
Copy link
Some part of the story is missing here. In old versions of NT, a thread does free its own stack: just before dying, it sets %esp to some temporary buffer in the TEB, and then calls NtFreeVirtualMemory() on the stack. Maybe the reaper kicked in only when a thread died abnormally?





Marek Knápek  November 1, 2023


  0  Collapse this comment
Copy link
By that logic: Who frees the TEB then, if there is currently a thread executing from it? I guess the answer is: the thread reaper. Everything Raymond said still applies, except the thread reaper is freeing the TEB instead of the stack now.




Matthew van Eerde (^_^)  October 31, 2023


  2  Collapse this comment
Copy link
The statistical likelihood is that other kernels will arise. There will one day be empty thread reaper list bugchecks





Michael Dunn  November 1, 2023


  1  Collapse this comment
Copy link
I’m still waiting for those lemon-soaked paper napkins.




Sunil Joshi  October 31, 2023


  1  Collapse this comment
Copy link
I like that you posted this story on Halloween. Very appropriate.





Justine Krejcha  November 1, 2023
· Edited

  0  Collapse this comment
Copy link
The 13 is a nice touch too.