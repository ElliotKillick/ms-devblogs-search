Yukkuri Reimu  January 10, 2024


  1  Collapse this comment
Copy link
“What about the VOUSes?”
“Vectors of unusual size? I don’t believe they exist.”
*Wham*





Henke37  January 7, 2024


  0  Collapse this comment
Copy link
When I see words like “it didn’t happen as much” it tips me off that there are threading shenanigans at play.





Ian Boyd  January 6, 2024


  0  Collapse this comment
Copy link
I loved your old post about lazy initialization, constructing it on the stack, and using InterlockedCompareExchange to put it into the global/member variable (and destroy it if we lost the race).
It’s such an elegant and simple solution, and I now use it all the time.





Bwmat  January 5, 2024


  1  Collapse this comment
Copy link
I believe you’re ‘losing’ the error from the following line in your final solution (the return value from the lambda is ignored [and on success it falls off the end?])

RETURN_IF_FAILED(
    MakeAndInitialize<Widget>(&widget, name));